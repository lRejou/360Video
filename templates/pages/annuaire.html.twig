{% extends 'base.html.twig'%}

{% block body%}

<div id="container">

    <div class="annuaire-haut">
        <div class="title-annuaire">
            <h1>Toutes nos vidéos</h1>
            <a class="button1">Comment poster une vidéo ?</a>
        </div>
        <div class="filtre-annuaire">
            <input id="filtreDate" type="radio" name="filtre" >
            <input id="filtreNote" type="radio" name="filtre" checked>
            <span>Ajouter un filtre</span>
            <div>
                <label id="checkboxDate" class="checkbox" for="filtreDate"><i class="fas fa-check"></i></label>Trier par date
            </div>
            <div>
                <label id="checkboxNote" class="checkbox" for="filtreNote"><i class="fas fa-check"></i></label>Trier par note
            </div>
        </div>
    </div>

    <div class="container-video">
        {% for video in videos  %}
            <a href="video/{{ video.id }}">
                <img src="https://img.youtube.com/vi/{{ video.link }}/0.jpg" alt="{{ video.name }}"/>
                <span class="annuaire-dateVideo" >{{video.date ? video.date|date('d/m/Y H:i:s') : '' }}</span>
                <span class="annuaire-titreVideo">{{ video.name }}</span>
                <div class="annuaire-noteContainer">
                    <div class="barrenote"><div style="width:50%;" ></div></div>
                    {% set idvideo = video.id %}
                    <div class="moyNote">
                    {% set somme = 0 %}
                    {% for note in video.notes %} 
                        {% set somme = somme + note.note %}
                    {% endfor %}
                    {% if somme == 0 %}
                        0
                    {% else %}
                        {% set somme = somme / video.notes|length %}
                        {{ somme|round(1, 'common') }}
                    {% endif %}
                    
                    
                     / 5</div>
                    
                    <div class="nbNote">{{ video.notes|length }} avis</div>
                </div>
            </a>
        {% endfor %}
    </div>

</div>


{% endblock %}